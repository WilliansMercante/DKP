CREATE DATABASE DKP
GO

USE DKP
GO

CREATE SCHEMA cadastro

CREATE TABLE cadastro.TB_CLIENTE(

ID_CLIENTE INT NOT NULL IDENTITY (1,1),
NM_CLIENTE VARCHAR (400) NOT NULL,
DT_NASCIMENTO DATE NOT NULL,
NR_CPF VARCHAR (11) NOT NULL,
DT_CADASTRO DATETIME NOT NULL,
NR_RG VARCHAR (20),
FL_ATIVO BIT NOT NULL CONSTRAINT DF_TB_CLIENTE_FL_ATIVO DEFAULT 1

CONSTRAINT PK_TB_CLIENTE_ID_CLIENTE PRIMARY KEY (ID_CLIENTE)
)
GO

CREATE TABLE cadastro.TB_TIPO_ENDERECO(

ID_TIPO_ENDERECO INT NOT NULL IDENTITY(1,1),
DS_TIPO_ENDERECO VARCHAR (200) NOT NULL,
FL_ATIVO BIT NOT NULL CONSTRAINT DF_TB_TIPO_ENDERECO_FL_ATIVO DEFAULT 1

CONSTRAINT PK_TB_TIPO_ENDERECO_ID_TIPO_ENDERECO PRIMARY KEY(ID_TIPO_ENDERECO)
)
GO

INSERT INTO cadastro.TB_TIPO_ENDERECO (DS_TIPO_ENDERECO) VALUES('Residencial')
GO
INSERT INTO cadastro.TB_TIPO_ENDERECO (DS_TIPO_ENDERECO) VALUES('Comercial')
GO

CREATE TABLE cadastro.TB_ENDERECO(

ID_ENDERECO INT NOT NULL IDENTITY(1,1),
ID_CLIENTE INT NOT NULL,
ID_TIPO_ENDERECO INT NOT NULL,
NM_LOGRADOURO VARCHAR (400) NOT NULL,
NR_LOGRADORO VARCHAR (20),
NR_CEP VARCHAR (7) NOT NULL,
NM_BAIRRO VARCHAR (400),
DT_CADASTRO DATETIME NOT NULL,
FL_ATIVO BIT NOT NULL CONSTRAINT DF_TB_ENDERECO_FL_ATIVO DEFAULT 1

CONSTRAINT PK_TB_ENDERECO_ID_ENDERECO PRIMARY KEY (ID_ENDERECO),
CONSTRAINT FK_TB_ENDERECO_ID_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES cadastro.TB_CLIENTE,
CONSTRAINT FK_TB_ENDERECO_ID_TIPO_ENDERECO FOREIGN KEY (ID_TIPO_ENDERECO) REFERENCES cadastro.TB_TIPO_ENDERECO
)
GO

CREATE TABLE cadastro.TB_TIPO_TELEFONE(

ID_TIPO_TELEFONE INT NOT NULL IDENTITY(1,1),
DS_TELEFONE VARCHAR(200) NOT NULL,
FL_ATIVO BIT NOT NULL CONSTRAINT DF_TB_TIPO_TELEFONE_FL_ATIVO DEFAULT 1

CONSTRAINT PK_TB_TIPO_TELEFONE_ID_TIPO_TELEFONE PRIMARY KEY(ID_TIPO_TELEFONE)
)
GO

INSERT INTO cadastro.TB_TIPO_TELEFONE (DS_TELEFONE) VALUES('Celular')
GO
INSERT INTO cadastro.TB_TIPO_TELEFONE (DS_TELEFONE) VALUES('Residencial')
GO
INSERT INTO cadastro.TB_TIPO_TELEFONE (DS_TELEFONE) VALUES('Comercial')
GO

CREATE TABLE cadastro.TB_TELEFONE(

ID_TELEFONE INT NOT NULL IDENTITY(1,1),
ID_CLIENTE INT NOT NULL,
ID_TIPO_TELEFONE INT NOT NULL,
NR_DDD VARCHAR (2) NOT NULL,
NR_TELEFONE VARCHAR(9) NOT NULL,
DT_CADASTRO DATETIME NOT NULL,
FL_ATIVO BIT NOT NULL CONSTRAINT DF_TB_TELEFONE_FL_ATIVO DEFAULT 1


CONSTRAINT PK_TB_TELEFONE_ID_TELEFONE PRIMARY KEY(ID_TELEFONE),
CONSTRAINT FK_TB_TELEFONE_ID_CLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES cadastro.TB_CLIENTE,
CONSTRAINT FK_TB_TELEFONE_ID_TIPO_TELEFONE FOREIGN KEY (ID_TIPO_TELEFONE) REFERENCES cadastro.TB_TIPO_TELEFONE
)
GO